<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>CTAS - Print Rooming List</title>
<style>
  body { font-family: Arial, sans-serif; background:#f5f5f5; margin:0; padding:30px; color:#333; }

  h1 { text-align:center; color:#d32f2f; margin-bottom:24px; }

  /* Toggle button */
  .toggle-btn {
    position:fixed;
    top:20px;
    left:20px;
    background:#d32f2f;
    color:#fff;
    border:none;
    padding:10px 14px;
    border-radius:6px;
    cursor:pointer;
    font-weight:bold;
    font-size:16px;
    z-index:1100;
  }
  .toggle-btn:hover { background:#b71c1c; }

  /* Overlay */
  .overlay {
    position:fixed;
    top:0; left:0;
    width:100%; height:100%;
    background:rgba(0,0,0,0.4);
    display:none;
    z-index:900;
  }
  .overlay.show { display:block; }

  /* Sidebar */
  .sidebar {
    position:fixed;
    top:0;
    left:-220px;
    width:220px;
    height:100%;
    background:#333;
    color:#fff;
    padding:20px;
    box-sizing:border-box;
    transition:left 0.3s;
    z-index:1000;
    border-right:2px solid #d32f2f;
  }
  .sidebar.show { left:0; }

  .sidebar h2 { margin-top:0; margin-bottom:20px; }
  .sidebar button {
    width:100%;
    padding:10px;
    margin-bottom:12px;
    background:#d32f2f;
    border:none;
    border-radius:6px;
    color:#fff;
    font-weight:bold;
    cursor:pointer;
  }
  .sidebar button:hover { background:#b71c1c; }

  .sidebar .close-btn {
    background:#555;
  }

  .container {
    max-width:1000px;
    margin:auto;
    background:#fff;
    padding:24px;
    border-radius:12px;
    box-shadow:0 6px 15px rgba(0,0,0,0.15);
  }

  select, button.action {
    padding:9px;
    border:1px solid #d32f2f;
    border-radius:6px;
    font-size:14px;
    margin-bottom:12px;
    background:#d32f2f;
    color:#fff;
    cursor:pointer;
    font-weight:bold;
  }
  button.action:hover { background:#b71c1c; }

  .header-box {
    margin-top:20px;
    padding:12px;
    border:1px solid #ddd;
    border-radius:8px;
  }

  .header-box h3 { margin:0 0 8px 0; color:#d32f2f; }

  table {
    width:100%;
    border-collapse:collapse;
    margin-top:16px;
  }

  th, td {
    border:1px solid #ddd;
    padding:10px;
    text-align:center;
    font-size:14px;
  }

  th { background:#d32f2f; color:#fff; }

  @media print {
    .toggle-btn, .sidebar, .overlay, select, button { display:none; }
    body { background:#fff; }
    .container { box-shadow:none; }
  }
</style>
</head>
<body>

<!-- Toggle -->
<button class="toggle-btn" onclick="openSidebar()">☰</button>

<!-- Overlay -->
<div class="overlay" id="overlay" onclick="closeSidebar()"></div>

<!-- Sidebar -->
<div class="sidebar" id="sidebar">
  <button class="close-btn" onclick="closeSidebar()">✖ Close</button>
  <h2>Admin Panel</h2>
  <button onclick="logout()">Logout</button>
</div>

<h1>CTAS - Print Crew Rooming List</h1>

<div class="container">
  <label>Select Country</label><br>
  <select id="flight">
    <option value="">Choose Country</option>
    <option value="Japan">Japan</option>
    <option value="Thailand">Thailand</option>
    <option value="Indonesia">Indonesia</option>
    <option value="Singapore">Singapore</option>
    <option value="Australia">Australia</option>
    <option value="Malaysia">Malaysia</option>
    <option value="South Korea">South Korea</option>
  </select><br>

  <button class="action" onclick="generateList()">Generate Rooming List</button>
  <button class="action" onclick="window.print()">Print Page</button>

  <div class="header-box" id="summary" style="display:none;">
    <h3>AirAsia X Berhad — Crew Rooming List</h3>
    <p id="summaryText"></p>
  </div>

  <table>
    <thead>
      <tr>
        <th>No</th>
        <th>Room</th>
        <th>Name</th>
        <th>Wake-Up</th>
        <th>Pick-Up</th>
      </tr>
    </thead>
    <tbody id="crewTable"></tbody>
  </table>
</div>

<script>
  const sidebar = document.getElementById("sidebar");
  const overlay = document.getElementById("overlay");

  function openSidebar() {
    sidebar.classList.add("show");
    overlay.classList.add("show");
  }
  function closeSidebar() {
    sidebar.classList.remove("show");
    overlay.classList.remove("show");
  }

  const flightInfo = {
    "Japan": { flight:"D7212", hotel:"Tokyo Marriott" },
    "Thailand": { flight:"AK456", hotel:"Centara Grand Bangkok" },
    "Indonesia": { flight:"QZ303", hotel:"Pullman Jakarta" },
    "Singapore": { flight:"SQ100", hotel:"Pan Pacific Singapore" },
    "Australia": { flight:"QF200", hotel:"Hilton Sydney" },
    "Malaysia": { flight:"MH300", hotel:"Mandarin Oriental KL" },
    "South Korea": { flight:"KE400", hotel:"Grand Hyatt Incheon" }
  };

  const permanentCrew = [
    { name:"Alice Tan", country:"Malaysia", room:101, wakeUp:"06:30", pickup:"07:30" },
    { name:"Kenji Sato", country:"Japan", room:102, wakeUp:"05:30", pickup:"06:30" },
    { name:"Maria Lopez", country:"Thailand", room:103, wakeUp:"06:00", pickup:"07:00" }
  ];

  function generateList() {
    const country = document.getElementById("flight").value;
    if (!country) { alert("Select a country"); return; }

    const saved = localStorage.getItem("crewData");
    const dynamicCrew = saved ? JSON.parse(saved).filter(c => c.country === country) : [];
    const fixedCrew = permanentCrew.filter(c => c.country === country);
    const allCrew = [...fixedCrew, ...dynamicCrew];

    document.getElementById("summary").style.display = "block";
    document.getElementById("summaryText").innerHTML =
      `<strong>Flight:</strong> ${flightInfo[country].flight}<br>
       <strong>Country:</strong> ${country}<br>
       <strong>Hotel:</strong> ${flightInfo[country].hotel}`;

    const tbody = document.getElementById("crewTable");
    tbody.innerHTML = "";
    allCrew.forEach((c,i) => {
      tbody.innerHTML += `
        <tr>
          <td>${i+1}</td>
          <td>${c.room}</td>
          <td>${c.name}</td>
          <td>${c.wakeUp}</td>
          <td>${c.pickup}</td>
        </tr>`;
    });
  }

  function logout() {
    localStorage.removeItem("isLoggedIn");
    window.location.href = "index.html";
  }
</script>

</body>
</html>

